<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Silly story generator</title>

    <style>
    body {
      font-family: helvetica, sans-serif;
      width: 350px;
    }
    label {
      font-weight: bold;  
    }
    div {
      padding-bottom: 20px;
    }
    input[type="text"] {
      padding: 5px;
      width: 150px;
    }
    p {
      background: #FFC125;
      color: #5E2612;
      padding: 10px;
      visibility: hidden;
    }
    </style>
  </head>

  <body>
    <div>
      <label for="customname">Enter custom name:</label>
      <input id="customname" type="text" placeholder="">
    </div>
    <div>
      <label for="us">US</label><input id="us" type="radio" name="ukus" value="us" checked>
      <label for="uk">UK</label><input id="uk" type="radio" name="ukus" value="uk">
    </div>
    <div>
      <button class="randomize">Generate random story</button>
    </div>
    <p class="story">hahaha</p>
    <script type="text/javascript">
    var customname = document.getElementById("customname");
    var btn = document.querySelector(".randomize");
    var story = document.querySelector(".story");

    var storyText = "a的一天，b走在街上，它路过了一家c。于是他走上前去问chris老板：老板老板，你这里有没有胡萝卜？老板回答说：没有。第二天b又去了，老板老板你这里有没有胡萝卜？老板回答说：我说了没有，你要是再来我就把你耳朵剪下来！。第三天它又去了，老板老板，你这里有剪刀么？老板说：没有。b：那你这里有胡萝卜么？";

    var b = ["兔子","驴子","小熊"];
    var a = ["1995年","2005年7月","2017年3月"];
    var c = ["包子店","火锅店","馒头铺"];

    btn.addEventListener("click",bian);
    function huan(array){
      var random = Math.floor(Math.random()*array.length);
      return array[random];
    }
    function bian(){
      var newstory = storyText;

      var itema = huan(a);
      var itemb = huan(b);
      var itemc = huan(c);

      newstory = newstory.replace("a",itema);
      newstory = newstory.replace("b",itemb);
      newstory = newstory.replace("c",itemc);
      newstory = newstory.replace("b",itemb);
      newstory = newstory.replace("b",itemb);

      if (customname.value != ""){
        newstory = newstory.replace("chris",customname.value);
      }
      if(document.getElementById("uk").checked){
        newstory = "哈哈，被骗了！切换过来什么都没有！";
      }
      story.textContent = newstory;
      story.style.visibility = "visible";
      customname.value= " ";
      customname.focus();
    }
    </script>
  </body>
</html>